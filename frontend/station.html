<!DOCTYPE html>
<html lang="sv">
   <head>
       <meta charset="utf-8">
       <title>Långpendlaren</title>
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <link rel="stylesheet" type="text/css" href="style.css">
   </head>
 
   <body>
           <header>
               <h1>Långpendlaren</h1>
           </header>
 
           <main>
               <div id="searchbar">
                   <div id="search_station">
                       <input id="station" type="text" placeholder="Ange station..." onkeyup="search(event)"/>
                   </div>

                    <div id="result">
                        <table id="timeTableDeparture">
                          <tr>
                            <th scope="col" style="width:200px;">Station</th>
                            <th scope="col"  style="width:200px;">Välj station</th>
                          </tr>
                          <tr>
                            <!--Utskrifter från JSON-->
                            <td><span id="codes"></span></td>
                            <td id="search_button">
                                <button type="button" value="Sök resa" onclick="">Sök efter avgångar</button>
                            </td>
                          </tr>
                        </table>
                      </div>
                 </div>


                <script>
                    var stations;
                    var jsonData = [
                    {
                        "AdvertisedLocationName": "Alingsås",
                        "LocationSignature": "A"
                    },
                    {
                        "AdvertisedLocationName": "Avesta centrum",
                        "LocationSignature": "Acm"
                    },
                    ];

                    function printData(Arr) {
                    for(var i=0; i<Arr.length; i++) {
                        stations.innerText += `\n${Arr[i].AdvertisedLocationName}`;
                    }
                    }

                    // it is a case insensitive search
                    function search(ev) {
                    var key = ev.target.value;
                    stations.innerText = null;
                    
                    printData(jsonData.filter((data)=>{
                        var regex = new RegExp(key, "i");
                        return data.AdvertisedLocationName.match(regex) || data.LocationSignature.match(regex);
                    }));
                    }

                    window.onload = function() {
                    stations = document.getElementById("codes");
                    printData(jsonData);
                    }
                </script>
              



           </main>
 
           <footer>
 
           </footer>
 
   </body>
</div>
 
</html>